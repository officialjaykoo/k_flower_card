# 한게임 신맞고 기준 기본룰 문서

## 1. 모바일 신맞고 기본 진행

50장의 화투에서 각각 10장씩을 나누어 갖고 바닥에 있는 나머지 화투에서 8장을 오픈해 놓은 다음 게임을 시작합니다. 첫 게임이라면 선 고르기를 통해 선을 정하고, 이후부터는 승자가 선이 되어 먼저 패를 냅니다.

둘이서 번갈아 패를 내며 게임이 진행됩니다. 내놓은 패가 바닥에 깔린 패와 무늬의 종류가 같다면 두 패 모두 자기가 가집니다. 패를 낸 다음에는 뒤집어져 있는 패 중 맨 위 한 장이 자동으로 오픈됩니다.

이때도 바닥에 같은 종류의 패가 있다면 역시 둘 다 가집니다. 무늬가 다르면 가질 수 없고 바닥에 내려놓게 됩니다. 게임을 진행하면서 패를 모으고 패의 종류에 따라 점수를 따게 됩니다.

## 2. 승리조건 (Go / Stop)

총점이 먼저 7점 이상이 된 사람은 `고`나 `스톱`을 할 수 있습니다.

- 스톱: 그 시점에서 승리 확정 후 게임 종료
- 고: 게임 계속 진행

역전 당할(독박) 위험을 안고 가는 대신, 더 높은 점수를 노릴 수 있습니다.

## 3. 한게임 족보

### 3-1. 광
광은 ‘光’자가 새겨져 있는 패로 모두 5장이 있습니다.

- 광 3장: 3점
- 비광 포함 3장: 2점
- 광 4장: 4점
- 오광(5장): 15점

### 3-2. 열끗
열끗은 기본 패의 모양에 동물들이 추가로 그려져 있는 패를 말합니다.

- 5장: 1점
- 이후 1장 추가마다 +1점
- 7장 이상: 멍따(멍텅구리 따블), 최종점수 2배

### 3-3. 고도리
열끗 중 새 모양 3장(2/4/8월)을 모으면 고도리로 5점입니다.

### 3-4. 띠
띠는 기본 패의 모양에 띠가 그려진 패(총 10장)입니다.

- 5장: 1점
- 이후 1장 추가마다 +1점
- 홍단/청단/초단(각 3장 완성): 각각 3점
- 12월 비 띠는 초단에 포함되지 않습니다.

### 3-5. 피
기본 패의 모양을 가진 것을 피라고 합니다.

- 1월~11월까지 2장씩 총 22장
- 피 10장: 1점
- 이후 1장 추가마다 +1점

### 3-6. 쌍피
11월 오동, 12월 비, 9월 국진은 쌍피(피 2장) 역할을 합니다.
국진 패는 열끗이지만 쌍피로 사용할 수도 있습니다.

### 3-7. 보너스 패
숫자가 적힌 패는 보너스패로 숫자에 따라 피 2장/3장 역할을 합니다.

- 시작 시 바닥에 있으면 선이 시작하기 전에 자동 획득
- 손패로 받으면 일반 패처럼 내고, 뒤집기 전에 새 패를 받아 한 번 더 칠 기회 획득
- 뒤집기 중 보너스가 나오면 한 번 더 뒤집기 가능
- 이때 뻑(설사)이 나면 보너스 패를 뻑 난 패들과 함께 바닥에 둡니다.

### 3-8. 폭탄 패
폭탄 패는 폭탄 또는 수류탄(2장 폭탄) 이후 나타나는 패입니다.
폭탄 패를 내면 중앙 덱에서 패만 뒤집을 수 있습니다.

## 4. 한게임 이벤트 룰

### 4-1. 뻑
바닥 패 하나를 먹으려고 같은 무늬를 냈는데, 뒤집은 패 역시 같은 무늬이면 패를 먹지 못하고 세 장 모두 바닥에 놓습니다. (마지막 패 제외)

- 상대방이 싼 패를 내가 먹는 경우: 상대 피 1장 추가 획득
- 자뻑: 자기가 싼 패를 자기가 먹는 경우 상대 피 2장 추가 획득
- 첫뻑: 7점 해당 금액 획득
- 2연뻑: 14점 해당 금액 획득
- 3연뻑: 21점 해당 금액 획득

### 4-2. 따닥
바닥에 같은 무늬 2장이 있고, 그 무늬를 내고 뒤집은 패도 같은 무늬이면 4장 모두 먹고 상대 피 1장을 가져옵니다.

- 첫 따닥은 7점 해당 금액을 우선 받습니다.

### 4-3. 판쓰리(쓸)
바닥 패를 한 번에 모두 가져가는 경우입니다.
패를 먹고 동시에 상대 피 1장을 가져옵니다.

### 4-4. 폭탄
자신에게 같은 무늬 3장이 있고 바닥에 나머지 1장이 있을 때, 3장을 한 번에 내서 먹는 경우입니다.
상대에게서 피 1장을 가져옵니다.

- 폭탄 후 폭탄 패 생성
- 폭탄 패 선택 시 손패를 내지 않고 덱만 뒤집기
- 폭탄도 흔들기와 마찬가지로 최종점수 2배 처리

### 4-5. 흔들기
바닥에 먹을 패가 없고 자신에게 같은 무늬 3장이 있을 때 선택할 수 있습니다.
카드를 보여준 대신 이기면 점수가 2배가 됩니다.

### 4-6. 수류탄(2장 폭탄)
바닥에 2장 묶음 패가 있고 내가 2장을 모두 갖고 있으면 수류탄입니다.

- 폭탄(3장): 2배 처리
- 수류탄(2장): 피 뺏기만 가능

### 4-7. 쪽
먹을 수 있는 패가 없어 아무 패를 냈는데, 뒤집은 패가 같은 무늬인 경우입니다.
패를 먹고 동시에 상대 피 1장을 가져옵니다. (마지막 패 제외)

## 5. 한게임 추가 규정 (요청 반영)

### 5-1. 고
고를 할 때마다 1점씩 추가됩니다.

- 1고 = (획득점수 + 1점)
- 2고 = (획득점수 + 2점)
- 3고 = (획득점수 + 3점) x 2배
- 4고 = (획득점수 + 4점) x 4배
- 5고 = (획득점수 + 5점) x 8배

### 5-2. 유한책임제
맞고 모드/고스톱 모드/자유경기장/섯다 대박경기장을 제외한 점당머니 경기장에서는 본인 소지 머니만큼만 획득합니다.

### 5-3. 최종 점수가 2배 되는 경우

- 폭탄/흔들기: 1회당 2배
- 멍따: 열끗 7장 이상 시 2배
- 독박: 고 상태에서 다시 고/스톱 전에 상대가 스톱하면, 지는 쪽 2배 배상
- 피박: 피 10장 이상으로 이기고 상대 피 7장 이하이면 2배
- 광박: 광 3장 이상으로 이기고 상대 광 0장이면 2배

### 5-4. 특수 상황

#### 총통
- 같은 무늬 4개 전부 획득 시 10점 즉시 종료
- 바닥패 총통도 즉시 종료
- 양쪽 모두 총통이면 선 유저 승리
- 보너스 패로 4장 완성 시 총통/들고치기 선택

#### 3연뻑
- 연속/불연속 무관 3뻑이면 7점 종료
- 연속 3뻑이면 7 + 14 + 21 + 7 = 총 49점 종료

#### 나가리
- 손패 소진 시까지 양쪽 모두 7점 미달이거나, 고 후 추가 점수 실패인 경우
- 다음 판 점수 2배(누적 가능)

## 6. 한게임 vs 우리 엔진 비교

### 6-1. 족보/기본 흐름 비교

#### 다른 점
- 멍따/멍박 배수: 우리 엔진은 `상대 열끗 0 + 내 열끗 7장 이상`일 때 적용합니다.
- 보너스가 뻑에 걸렸을 때: 우리 엔진은 내부 `홀딩` 후 뻑 먹기 시 회수/강탈 적용합니다.
- 폭탄 패 개념: 우리 엔진 `bomb-declare` 더미 선언카드와 역할은 같고 표현(UI)만 다릅니다.
- 수류탄(2장 폭탄): 우리 엔진 미구현입니다.

### 6-2. 현재 엔진에 반영된 항목
- 자뻑/일반뻑 먹기 강탈량: 둘 다 `+1피`
- 자뻑/일반뻑 먹기 보너스 처리: 동일 로직
- 피 강탈 우선순위: `1피 > 2피 > 국진 2피 > 3피`
- 첫뻑/연뻑 금액: `7 / 14 / 21`
- 3연뻑: 즉시 라운드 승리
- 누적 3뻑: 즉시 승리(기본점수 7)
- 첫 따닥 금액 보상: 미적용
- 수류탄: 미적용(폭탄만 적용)
- 첫 판 선 정하기: 밤일낮장 로직

### 6-3. 한게임 추가 규정 대비 차이
1. 고 배수
- 한게임: 3고 x2, 4고 x4, 5고 x8
- 우리 엔진: 한게임과 동일

2. 유한책임제
- 한게임: 소지 머니 한도 내 지급
- 우리 엔진: 상대 보유 골드 한도 내 지급
- 차이: 지급 후 상대 골드가 0이면 해당 판은 0 유지, 다음 게임 시작 시 1,000,000골드로 재시작

3. 최종 2배 조건
- 폭탄/흔들기: 동일(누적 x2)
- 멍따: 한게임은 열끗 7장 이상, 우리 엔진은 `내 열끗 7+상대 열끗 0`
- 독박: 우리 엔진도 STOP 승리 시 패자 goCount 1 이상이면 2배 적용(한게임과 동일)
- 피박/광박: 우리 엔진은 고 여부와 무관하게 판정
- 면박: 우리 엔진은 상대 피 0이면 피박 면제

4. 총통
- 한게임: 총통 즉시 종료(양쪽 총통 시 선 승)
- 우리 엔진:
- 손패 4장(대통령): 10점 종료 또는 들고치기
- 바닥 4장(바닥 대통령): 선공 즉시 승리, 10점 종료
- 양쪽 총통 선승 규정은 명시적으로 따르지 않음
- 보너스로 4장 완성 시 선택 진입은 지원

5. 3연뻑
- 한게임: 불연속 3뻑도 7점 종료, 연속 3뻑은 49점 종료
- 우리 엔진: 누적 3뻑 즉시 승리(7점), 연속뻑은 7/14/21 보상 처리

6. 나가리
- 한게임: 조건 성립 시 다음 판 2배
- 우리 엔진: 무승부/양측 무득점/GO 실패 조건에서 나가리 처리 후 다음 판 x2 (연속 누적)

### 6-4. 용어 차이
- 판쓰리(한게임) = 판쓸(현재 문서 표기)
- 뻑 = 쌌다(한게임 표현)
- 수류탄(2장 폭탄)은 한게임 용어, 우리 엔진은 전용 이벤트 키 없음
- 연뻑(현재 규정): 각 플레이어 기준 첫 턴부터 연속 뻑일 때만 2연/3연 보상 적용

### 6-5. 우리만 있는 규칙
- 대통령/들고치기/바닥대통령
- 국진 선택 잠금(피 계산/점수 판정 영향 시점 1회)
- 골드 경제(점수 환산 정산)
- 뻑 관련 커스텀 규정(자뻑/상대뻑 동일 +1, 첫뻑/연뻑 7/14/21, 누적 3뻑 즉시승리)

## 7. 비교 근거 코드 위치
- 뻑/자뻑/연뻑/일반뻑 먹기/뻑 금액 처리: `src/engine/game/finalizeTurn.js`
- 뻑/쪽/따닥 이벤트 태그 판단: `src/engine/matching.js`
- 폭탄/흔들기 처리: `src/state.js`
- 폭탄 가능 조건(3장+바닥1장): `src/engine/game/selectors.js`
- 선턴 결정(밤일낮장): `src/engine/opening.js`
